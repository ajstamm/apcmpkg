devtools::check()
devtools::check()
devtools::build_rmd()
devtools::build()
devtools::check()
??lm
devtools::check()
devtools::check()
devtools::check()
devtools::check()
devtools::check()
devtools::check()
devtools::check()
devtools::check()
devtools::check()
devtools::check()
devtools::check()
devtools::check()
d <- tibble::tibble(
case = sample(c(0, 1), prob = c(25, 75), n = 1000),
set = rep("cf", 1000),
edu_cat = sample(c("Some HS", "HS grad", "Some uni", "Uni grad", "Post uni"),
prob = c(16, 23, 27, 17, 17), n = 1000),
inc_cat = sample(c("Low", "Med-low", "Med-high", "High"),
prob = c(25, 25, 25, 25), n = 1000),
tobacco_cat = sample(c(0, 1), prop = c(85, 15), n = 1000),
cseason_cat = sample(c("Winter", "Spring", "Summer", "Autumn"),
prob = c(23, 25, 27, 25), n = 1000)
)
?sample
d <- tibble::tibble(
case = sample(c(0, 1), prob = c(25, 75), size = 1000),
set = rep("cf", 1000),
edu_cat = sample(c("Some HS", "HS grad", "Some uni", "Uni grad", "Post uni"),
prob = c(16, 23, 27, 17, 17), size = 1000),
inc_cat = sample(c("Low", "Med-low", "Med-high", "High"),
prob = c(25, 25, 25, 25), size = 1000),
tobacco_cat = sample(c(0, 1), prop = c(85, 15), size = 1000),
cseason_cat = sample(c("Winter", "Spring", "Summer", "Autumn"),
prob = c(23, 25, 27, 25), size = 1000)
)
d <- tibble::tibble(
case = sample(c(0, 1), prob = c(25, 75), size = 1000, replace = TRUE),
set = rep("cf", 1000),
edu_cat = sample(c("Some HS", "HS grad", "Some uni", "Uni grad", "Post uni"),
prob = c(16, 23, 27, 17, 17), size = 1000, replace = TRUE),
inc_cat = sample(c("Low", "Med-low", "Med-high", "High"),
prob = c(25, 25, 25, 25), size = 1000, replace = TRUE),
tobacco_cat = sample(c(0, 1), prop = c(85, 15), size = 1000, replace = TRUE),
cseason_cat = sample(c("Winter", "Spring", "Summer", "Autumn"),
prob = c(23, 25, 27, 25), size = 1000, replace = TRUE)
)
?sample.int
d <- tibble::tibble(
case = sample.int(c(0, 1), prob = c(25, 75), size = 1000, replace = TRUE),
set = rep("cf", 1000),
edu_cat = sample.int(c("Some HS", "HS grad", "Some uni", "Uni grad", "Post uni"),
prob = c(16, 23, 27, 17, 17), size = 1000, replace = TRUE),
inc_cat = sample.int(c("Low", "Med-low", "Med-high", "High"),
prob = c(25, 25, 25, 25), size = 1000, replace = TRUE),
tobacco_cat = sample.int(c(0, 1), prop = c(85, 15), size = 1000, replace = TRUE),
cseason_cat = sample.int(c("Winter", "Spring", "Summer", "Autumn"),
prob = c(23, 25, 27, 25), size = 1000, replace = TRUE)
)
d <- tibble::tibble(
set = rep("cf", 1000),
case = sample.int(c(0, 1), prob = c(25, 75), replace = TRUE),
edu_cat = sample.int(c("Some HS", "HS grad", "Some uni", "Uni grad", "Post uni"),
prob = c(16, 23, 27, 17, 17), size = 1000, replace = TRUE),
inc_cat = sample.int(c("Low", "Med-low", "Med-high", "High"),
prob = c(25, 25, 25, 25), size = 1000, replace = TRUE),
tobacco_cat = sample.int(c(0, 1), prop = c(85, 15), size = 1000, replace = TRUE),
cseason_cat = sample.int(c("Winter", "Spring", "Summer", "Autumn"),
prob = c(23, 25, 27, 25), size = 1000, replace = TRUE)
)
d <- tibble::tibble(
set = rep("cf", 1000),
case = sample.int(c(0, 1), prob = c(25, 75)),
edu_cat = sample.int(c("Some HS", "HS grad", "Some uni", "Uni grad", "Post uni"),
prob = c(16, 23, 27, 17, 17), size = 1000, replace = TRUE),
inc_cat = sample.int(c("Low", "Med-low", "Med-high", "High"),
prob = c(25, 25, 25, 25), size = 1000, replace = TRUE),
tobacco_cat = sample.int(c(0, 1), prop = c(85, 15), size = 1000, replace = TRUE),
cseason_cat = sample.int(c("Winter", "Spring", "Summer", "Autumn"),
prob = c(23, 25, 27, 25), size = 1000, replace = TRUE)
)
sample.int(c(0, 1), prob = c(25, 75))
sample(c(0, 1), prob = c(25, 75))
sample(c(0, 1), prob = c(25, 75), size = 1000, replace = TRUE)
d <- tibble::tibble(
set = rep("cf", 1000),
case = sample(c(0, 1), prob = c(25, 75), size = 1000, replace = TRUE),
edu_cat = sample(c("Some HS", "HS grad", "Some uni", "Uni grad", "Post uni"),
prob = c(16, 23, 27, 17, 17), size = 1000, replace = TRUE),
inc_cat = sample(c("Low", "Med-low", "Med-high", "High"),
prob = c(25, 25, 25, 25), size = 1000, replace = TRUE),
tobacco_cat = sample(c(0, 1), prop = c(85, 15), size = 1000, replace = TRUE),
cseason_cat = sample(c("Winter", "Spring", "Summer", "Autumn"),
prob = c(23, 25, 27, 25), size = 1000, replace = TRUE)
)
vc <- sample(c(0, 1), prob = c(25, 75), size = 1000, replace = TRUE)
vc <- sample(c(0, 1), prob = c(75, 25), size = 1000, replace = TRUE)
ve <- sample(c("Some HS", "HS grad", "Some uni", "Uni grad", "Post uni"),
prob = c(16, 23, 27, 17, 17), size = 1000, replace = TRUE)
vi <- sample(c("Low", "Med-low", "Med-high", "High"),
prob = c(25, 25, 25, 25), size = 1000, replace = TRUE)
vt <- sample(c(0, 1), prop = c(85, 15), size = 1000, replace = TRUE)
vc <- sample(c(0, 1), prob = c(75, 25), size = 1000, replace = TRUE)
ve <- sample(c("Some HS", "HS grad", "Some uni", "Uni grad", "Post uni"),
prob = c(16, 23, 27, 17, 17), size = 1000, replace = TRUE)
vi <- sample(c("Low", "Med-low", "Med-high", "High"),
prob = c(25, 25, 25, 25), size = 1000, replace = TRUE)
vt <- sample(c(0, 1), prob = c(85, 15), size = 1000, replace = TRUE)
vs <- sample(c("Winter", "Spring", "Summer", "Autumn"),
prob = c(23, 25, 27, 25), size = 1000, replace = TRUE)
d <- tibble::tibble(set = rep("cf", 1000), case = vc, edu_cat = ve,
inc_cat = vi, tobacco_cat = vt, cseason_cat = vs)
d <- tibble::tibble(
set = rep("cf", 1000),
case = sample(c(0, 1), prob = c(75, 25), size = 1000, replace = TRUE),
edu_cat = sample(c("Some HS", "HS grad", "Some uni", "Uni grad", "Post uni"),
prob = c(16, 23, 27, 17, 17), size = 1000, replace = TRUE),
inc_cat = sample(c("Low", "Med-low", "Med-high", "High"),
prob = c(25, 25, 25, 25), size = 1000, replace = TRUE),
tobacco_cat = sample(c(0, 1), prob = c(85, 15), size = 1000, replace = TRUE),
cseason_cat = sample(c("Winter", "Spring", "Summer", "Autumn"),
prob = c(23, 25, 27, 25), size = 1000, replace = TRUE)
)
table(d$case, d$edu_cat)
prop.table(table(d$case, d$edu_cat), side = 1)
prop.table(table(d$case, d$edu_cat))
prop.table(table(d$case, d$inc_cat))
prop.table(table(d$case, d$tobacco_cat))
prop.table(table(d$case, d$cseason_cat))
60-37.2
9.7*2
o <- tibble::tibble( # mean = 37.2, sd = ~9.7
w1_o3_mean <- rnorm(1000, mean = 37.2, sd = 9.7),
w2_o3_mean <- rnorm(1000, mean = 37.2, sd = 9.7),
w3_o3_mean <- rnorm(1000, mean = 37.2, sd = 9.7),
w4_o3_mean <- rnorm(1000, mean = 37.2, sd = 9.7),
w5_o3_mean <- rnorm(1000, mean = 37.2, sd = 9.7)
)
head(o)
o <- tibble::tibble( # mean = 37.2, sd = ~9.7
w1_o3_mean = rnorm(1000, mean = 37.2, sd = 9.7),
w2_o3_mean = rnorm(1000, mean = 37.2, sd = 9.7),
w3_o3_mean = rnorm(1000, mean = 37.2, sd = 9.7),
w4_o3_mean = rnorm(1000, mean = 37.2, sd = 9.7),
w5_o3_mean = rnorm(1000, mean = 37.2, sd = 9.7)
)
o <- tibble::tibble( # mean = 37.2, sd = ~9.7
w1_o3_mean = rnorm(1000, mean = 37.2, sd = 9.7),
w2_o3_mean = mean(rnorm(1000, mean = 37.2, sd = 9.7), w1_o3_mean),
w3_o3_mean = mean(rnorm(1000, mean = 37.2, sd = 9.7), w2_o3_mean),
w4_o3_mean = mean(rnorm(1000, mean = 37.2, sd = 9.7), w3_o3_mean),
w5_o3_mean = mean(rnorm(1000, mean = 37.2, sd = 9.7), w4_o3_mean)
)
o <- tibble::tibble( # mean = 37.2, sd = ~9.7
w1_o3_mean = rnorm(1000, mean = 37.2, sd = 9.7),
w2_o3_mean = rnorm(1000, mean = 37.2, sd = 9.7),
w2_o3_mean = mean(w1_o3_mean, w2_o3_mean),
w3_o3_mean = rnorm(1000, mean = 37.2, sd = 9.7),
w4_o3_mean = rnorm(1000, mean = 37.2, sd = 9.7),
w5_o3_mean = rnorm(1000, mean = 37.2, sd = 9.7)
)
o <- tibble::tibble( # mean = 37.2, sd = ~9.7
w1_o3_mean = rnorm(1000, mean = 37.2, sd = 9.7),
w2_o3_mean = rnorm(1000, mean = 37.2, sd = 9.7),
w2_o3_mean = (w1_o3_mean + w2_o3_mean) / 2,
w3_o3_mean = rnorm(1000, mean = 37.2, sd = 9.7),
w4_o3_mean = rnorm(1000, mean = 37.2, sd = 9.7),
w5_o3_mean = rnorm(1000, mean = 37.2, sd = 9.7)
)
o <- tibble::tibble( # mean = 37.2, sd = ~9.7
w1_o3_mean = rnorm(1000, mean = 37.2, sd = 9.7),
temp = rnorm(1000, mean = 37.2, sd = 9.7),
w2_o3_mean = (w1_o3_mean + temp) / 2,
w3_o3_mean = rnorm(1000, mean = 37.2, sd = 9.7),
w4_o3_mean = rnorm(1000, mean = 37.2, sd = 9.7),
w5_o3_mean = rnorm(1000, mean = 37.2, sd = 9.7)
)
head(o)
o <- tibble::tibble( # mean = 37.2, sd = ~9.7
w1_o3_mean = rnorm(1000, mean = 37.2, sd = 9.7),
temp = rnorm(1000, mean = 37.2, sd = 9.7),
w2_o3_mean = (w1_o3_mean + temp) / 2,
temp = rnorm(1000, mean = 37.2, sd = 9.7),
w3_o3_mean = (w2_o3_mean + temp) / 2,
temp = rnorm(1000, mean = 37.2, sd = 9.7),
w4_o3_mean = (w3_o3_mean + temp) / 2,
temp = rnorm(1000, mean = 37.2, sd = 9.7),
w5_o3_mean = (w4_o3_mean + temp) / 2
)
o <- tibble::tibble( # mean = 37.2, sd = ~9.7
w1_o3_mean = rnorm(1000, mean = 37.2, sd = 9.7),
temp1 = rnorm(1000, mean = 37.2, sd = 9.7),
w2_o3_mean = (w1_o3_mean + temp1) / 2,
temp2 = rnorm(1000, mean = 37.2, sd = 9.7),
w3_o3_mean = (w2_o3_mean + temp2) / 2,
temp3 = rnorm(1000, mean = 37.2, sd = 9.7),
w4_o3_mean = (w3_o3_mean + temp3) / 2,
temp4 = rnorm(1000, mean = 37.2, sd = 9.7),
w5_o3_mean = (w4_o3_mean + temp4) / 2
)
head(o)
o <- tibble::tibble( # mean = 37.2, sd = ~9.7
w1_o3_mean = rnorm(1000, mean = 37.2, sd = 9.7),
temp1 = rnorm(1000, mean = 37.2, sd = 9.7),
w2_o3_mean = (w1_o3_mean + temp1) / 2,
temp2 = rnorm(1000, mean = 37.2, sd = 9.7),
w3_o3_mean = (w2_o3_mean + temp2) / 2,
temp3 = rnorm(1000, mean = 37.2, sd = 9.7),
w4_o3_mean = (w3_o3_mean + temp3) / 2,
temp4 = rnorm(1000, mean = 37.2, sd = 9.7),
w5_o3_mean = (w4_o3_mean + temp4) / 2
) |> dplyr::select(dplyr::contains("mean"))
head(o)
d <- dplyr::bind_cols(d, o)
model <- cb_signif(d, argvar = "lin", arglag = "lin", knots = 0, startlag = 4)
58.7-37.2
21.5/1.95
min(o)
max(o)
model$cf$o3$mean$lin_lin$mclag
devtools::check()
devtools::build()
d <- tibble::tibble(
set = rep("cf", 1000),
case = sample(c(0, 1), prob = c(75, 25), size = 1000, replace = TRUE),
edu_cat = ifelse(case == 0, sample(edu_lvls, prob = c(16, 23, 27, 17, 17)),
sample(edu_lvls, prob = c(17, 26, 29, 15, 13)),
inc_cat = sample(c("Low", "Med-low", "Med-high", "High"),
prob = c(25, 25, 25, 25), size = 1000, replace = TRUE),
tobacco_cat = sample(c(0, 1), prob = c(85, 15), size = 1000, replace = TRUE),
cseason_cat = sample(c("Winter", "Spring", "Summer", "Autumn"),
prob = c(23, 25, 27, 25), size = 1000, replace = TRUE)
)
d <- tibble::tibble(
set = rep("cf", 1000),
case = sample(c(0, 1), prob = c(75, 25), size = 1000, replace = TRUE),
edu_cat = ifelse(case == 0, sample(edu_lvls, prob = c(16, 23, 27, 17, 17)),
sample(edu_lvls, prob = c(17, 26, 29, 15, 13))),
inc_cat = sample(c("Low", "Med-low", "Med-high", "High"),
prob = c(25, 25, 25, 25), size = 1000, replace = TRUE),
tobacco_cat = sample(c(0, 1), prob = c(85, 15), size = 1000, replace = TRUE),
cseason_cat = sample(c("Winter", "Spring", "Summer", "Autumn"),
prob = c(23, 25, 27, 25), size = 1000, replace = TRUE)
)
edu_lvls <- c("Some HS", "HS grad", "Some uni", "Uni grad", "Post uni")
d <- tibble::tibble(
set = rep("cf", 1000),
case = sample(c(0, 1), prob = c(75, 25), size = 1000, replace = TRUE),
edu_cat = ifelse(case == 0, sample(edu_lvls, prob = c(16, 23, 27, 17, 17)),
sample(edu_lvls, prob = c(17, 26, 29, 15, 13))),
inc_cat = sample(c("Low", "Med-low", "Med-high", "High"),
prob = c(25, 25, 25, 25), size = 1000, replace = TRUE),
tobacco_cat = sample(c(0, 1), prob = c(85, 15), size = 1000, replace = TRUE),
cseason_cat = sample(c("Winter", "Spring", "Summer", "Autumn"),
prob = c(23, 25, 27, 25), size = 1000, replace = TRUE)
)
d <- tibble::tibble(
set = rep("clp", 1000),
case = sample(c(0, 1), prob = c(75, 25), size = 1000, replace = TRUE),
edu_cat = ifelse(case == 0, sample(edu_lvls, prob = c(16, 23, 27, 17, 17)),
sample(edu_lvls, prob = c(17, 26, 29, 15, 13))),
inc_cat = ifelse(case == 0, sample(inc_lvls, prob = c(25, 25, 25, 25)),
sample(inc_lvls, prob = c(29, 28, 22, 21))),
tobacco_cat = ifelse(case == 0, sample(c(0, 1), prob = c(85, 15)),
sample(c(0, 1), prob = c(78, 22))),
cseason_cat = ifelse(case == 0, sample(seas_lvls, prob = c(23, 25, 27, 25)),
sample(seas_lvls, prob = c(25, 22, 26, 27))),
id = sample(1:1000, size = 1000)
)
edu_lvls <- c("Some HS", "HS grad", "Some uni", "Uni grad", "Post uni")
inc_lvls <- c("Low", "Med-low", "Med-high", "High")
seas_lvls <- c("Winter", "Spring", "Summer", "Autumn")
d <- tibble::tibble(
set = rep("clp", 1000),
case = sample(c(0, 1), prob = c(75, 25), size = 1000, replace = TRUE),
edu_cat = ifelse(case == 0, sample(edu_lvls, prob = c(16, 23, 27, 17, 17)),
sample(edu_lvls, prob = c(17, 26, 29, 15, 13))),
inc_cat = ifelse(case == 0, sample(inc_lvls, prob = c(25, 25, 25, 25)),
sample(inc_lvls, prob = c(29, 28, 22, 21))),
tobacco_cat = ifelse(case == 0, sample(c(0, 1), prob = c(85, 15)),
sample(c(0, 1), prob = c(78, 22))),
cseason_cat = ifelse(case == 0, sample(seas_lvls, prob = c(23, 25, 27, 25)),
sample(seas_lvls, prob = c(25, 22, 26, 27))),
id = sample(1:1000, size = 1000)
)
length(unique(d$id))
o <- tibble::tibble( # mean = ~38, sd = ~11
w1_o3_mean = rnorm(1000, mean = 38, sd = 11),
temp1 = rnorm(1000, mean = 38, sd = 11),
w2_o3_mean = w1_o3_mean + (w1_o3_mean - temp1) / 4,
temp2 = rnorm(1000, mean = 38, sd = 11),
w3_o3_mean = w2_o3_mean + (w2_o3_mean - temp2) / 4,
temp3 = rnorm(1000, mean = 38, sd = 11),
w4_o3_mean = w3_o3_mean + (w3_o3_mean - temp3) / 4,
temp4 = rnorm(1000, mean = 38, sd = 11),
w5_o3_mean = w4_o3_mean + (w4_o3_mean - temp4) / 4,
id = sample(1:1000, size = 1000)
) |> dplyr::select(id, dplyr::contains("mean"))
length(unique(o$id))
d <- dplyr::full_join(d, o, by = "id")
head(o)
o <- tibble::tibble( # mean = ~38, sd = ~11
w1_o3_mean = rnorm(1000, mean = 38, sd = 11),
temp1 = rnorm(1000, mean = 38, sd = 11),
w2_o3_mean = w1_o3_mean - (w1_o3_mean - temp1) / 4,
temp2 = rnorm(1000, mean = 38, sd = 11),
w3_o3_mean = w2_o3_mean - (w2_o3_mean - temp2) / 4,
temp3 = rnorm(1000, mean = 38, sd = 11),
w4_o3_mean = w3_o3_mean - (w3_o3_mean - temp3) / 4,
temp4 = rnorm(1000, mean = 38, sd = 11),
w5_o3_mean = w4_o3_mean - (w4_o3_mean - temp4) / 4,
id = sample(1:1000, size = 1000)
) |> dplyr::select(id, dplyr::contains("mean"))
head(o)
d <- tibble::tibble(
set = rep("clp", 1000),
case = sample(c(0, 1), prob = c(75, 25), size = 1000, replace = TRUE),
edu_cat = ifelse(case == 0, sample(edu_lvls, prob = c(16, 23, 27, 17, 17)),
sample(edu_lvls, prob = c(17, 26, 29, 15, 13))),
inc_cat = ifelse(case == 0, sample(inc_lvls, prob = c(25, 25, 25, 25)),
sample(inc_lvls, prob = c(29, 28, 22, 21))),
tobacco_cat = ifelse(case == 0, sample(c(0, 1), prob = c(85, 15)),
sample(c(0, 1), prob = c(78, 22))),
cseason_cat = ifelse(case == 0, sample(seas_lvls, prob = c(23, 25, 27, 25)),
sample(seas_lvls, prob = c(25, 22, 26, 27))),
id = sample(1:1000, size = 1000)
)
d <- dplyr::full_join(d, o, by = "id")
min(o)
max(o)
min(o |> dplyr::select(-id))
max(o |> dplyr::select(-id))
hist(o |> dplyr::select(-id), breaks = 100)
hist(unlist(o |> dplyr::select(-id)), breaks = 100)
model <- cb_signif(d, argvar = "lin", arglag = "lin", knots = 0, startlag = 4)
model$clp$o3$mean$lin_lin$mclag
model$clp$o3$mean$lin_lin$mblag
plots <- cross_plot(bd = "clp", air = "o3", measure = "mean",
model = "mclag", list = model)
devtools::check()
devtools::build()
plots <- cross_plot(bd = "clp", air = "o3", measure = "mean",
model = "mclag", list = model)
devtools::check()
plots <- cross_plot(bd = "clp", air = "o3", measure = "mean",
model = "mclag", list = model)
mdl <- cb_signif(d, argvar = "lin", arglag = "lin", knots = 0, startlag = 4)
bd = "clp"; air = "o3"; measure = "mean";
model = "mclag"; list = mdl
centre = NULL; atvals = NULL; plotvar = NULL
cb <- list[[bd]][[air]][[measure]][[model]]$mccb
mc <- list[[bd]][[air]][[measure]][[model]]$mcov
lag <- list[[bd]][[air]][[measure]][[model]]$mclag
d <- list[[bd]]$data
l <- rev(names(d)[grepl(paste(air, measure, sep = "_"),
names(d))]) # most recent first
mdl$clp$o3$mean$lin_lin$mclag
model = "lin_lin"
cb <- list[[bd]][[air]][[measure]][[model]]$mccb
mc <- list[[bd]][[air]][[measure]][[model]]$mcov
lag <- list[[bd]][[air]][[measure]][[model]]$mclag
d <- list[[bd]]$data
l <- rev(names(d)[grepl(paste(air, measure, sep = "_"),
names(d))]) # most recent first
if (is.null(centre)) {
if (air=="pm" & measure=="mean") {
centre <- 20 # Q1
} else if (air=="pm") { # peak
centre <- 30 # Q1
} else if (measure=="mean") { # O3
centre <- 60 # Q1
} else { # O3 peak
centre <- 80 # Q1
}
}
if (is.null(atvals)) {
t <- d[, l]
atvals <- c(min(t), max(t))
}
if (is.null(plotvar)) plotvar <- centre + 10 # 10-unit increase
atvals <- c(floor(min(t)), ceiling(max(t)))
devtools::check()
plots <- cross_plot(bd = "clp", air = "o3", measure = "mean",
model = "lin_lin", list = mdl)
plots <- list()
grDevices::dev.new(noRStudioGD = TRUE, res = 1200, width = 20, height = 14)
grDevices::dev.control('enable') # enable display list
graphics::par(mar = c(4, 2, 2, 1), mgp = c(3, 1, 0), xpd = TRUE)
cp <- dlnm::crosspred(cb, mc, cen = centre, at = atvals, bylag = 1)
title <- paste(bd, air, measure, "single-pollutant CI lines")
plot(cp, "slices", ci="bars", type="p", col=2, pch=19, var = plotvar,
ci.level=0.95, main=title, xlim = c(0, lag), ylab = "RR")
plot(cp, "slices", ci="bars", type="p", col=2, pch=19,
var = plotvar, main=title, # ylim = c(0, 10), xlim = c(0, 5),
ci.level=0.95, ylab = "RR")
cp <- dlnm::crosspred(cb, mc, cumul=TRUE, cen = centre, at = atvals, bylag = 0.1)
title <- paste(bd, air, measure, "Lags CI curve")
plot(cp, "slices", var=plotvar, col=3, ylab="RR", xlim = c(0, lag),
ci.arg=list(density=15,lwd=2), main=title)
atvals <- floor(min(t)):ceiling(max(t))
atvals <- c(floor(min(t)):ceiling(max(t)), centre, plotvar)
cp <- dlnm::crosspred(cb, mc, cen = centre, at = atvals, bylag = 1)
title <- paste(bd, air, measure, "single-pollutant CI lines")
plot(cp, "slices", ci="bars", type="p", col=2, pch=19, var = plotvar,
ci.level=0.95, main=title, xlim = c(0, lag), ylab = "RR")
devtools::check()
plots <- cross_plot(bd = "clp", air = "o3", measure = "mean",
model = "lin_lin", list = mdl)
